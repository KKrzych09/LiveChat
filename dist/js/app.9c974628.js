(()=>{"use strict";var e={3266:(e,n,r)=>{r(6992),r(8674),r(9601),r(7727);var t=r(5010),a=r(3396);function o(e,n){var r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(r)}var u=r(89);const i={},l=(0,u.Z)(i,[["render",o]]),s=l;var c=r(2483),p={class:"welcome container"},d=(0,a._)("p",null,"Welcome",-1),v={key:0},f=(0,a._)("h2",null,"Login",-1),m=(0,a.Uk)("No account yet? "),g=(0,a.Uk)(" instead"),h={key:1},w=(0,a._)("h2",null,"Sign up",-1),y=(0,a.Uk)("Already registered? "),k=(0,a.Uk)(" instead");function b(e,n,r,t,o,u){var i=(0,a.up)("LoginForm"),l=(0,a.up)("SignupForm");return(0,a.wg)(),(0,a.iD)("div",p,[d,t.showLogin?((0,a.wg)(),(0,a.iD)("div",v,[f,(0,a.Wm)(i,{onLogin:t.enterChat},null,8,["onLogin"]),(0,a._)("button",{onClick:n[0]||(n[0]=function(){return t.googleSignIn&&t.googleSignIn.apply(t,arguments)})},"Log in with Google"),(0,a._)("p",null,[m,(0,a._)("span",{onClick:n[1]||(n[1]=function(e){return t.showLogin=!1})},"Signup"),g])])):((0,a.wg)(),(0,a.iD)("div",h,[w,(0,a.Wm)(l,{onSignup:t.enterChat},null,8,["onSignup"]),(0,a._)("p",null,[y,(0,a._)("span",{onClick:n[2]||(n[2]=function(e){return t.showLogin=!0})},"Login"),k])]))])}var _=r(7139),Z={class:"error"},x=(0,a._)("button",null,"Sign up",-1);function C(e,n,r,o,u,i){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[3]||(n[3]=(0,t.iM)((function(){return o.handleSubmit&&o.handleSubmit.apply(o,arguments)}),["prevent"]))},[(0,a.wy)((0,a._)("input",{type:"text",required:"",placeholder:"display name","onUpdate:modelValue":n[0]||(n[0]=function(e){return o.displayName=e})},null,512),[[t.nr,o.displayName]]),(0,a.wy)((0,a._)("input",{type:"email",required:"",placeholder:"email","onUpdate:modelValue":n[1]||(n[1]=function(e){return o.email=e})},null,512),[[t.nr,o.email]]),(0,a.wy)((0,a._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":n[2]||(n[2]=function(e){return o.password=e})},null,512),[[t.nr,o.password]]),(0,a._)("div",Z,(0,_.zw)(o.error),1),x],32)}var S=r(124),D=r(8534),H=r(4870),U=(r(1703),r(6647),r(4275)),P=(r(2702),r(4059),r(6287),{apiKey:"AIzaSyCR3aNishYrJKhNQKxroqKRm7KsQESga2E",authDomain:"vue-firebase-sites-cf6cd.firebaseapp.com",projectId:"vue-firebase-sites-cf6cd",storageBucket:"vue-firebase-sites-cf6cd.appspot.com",messagingSenderId:"908253611293",appId:"1:908253611293:web:9551ee829f932fc8c28df4"});U.Z.initializeApp(P);var A=U.Z.auth(),N=U.Z.firestore(),L=U.Z.firestore.FieldValue.serverTimestamp,z=U.Z.storage(),E=(0,H.iH)(null),I=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(n,r,t){var a;return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return E.value=null,e.prev=1,e.next=4,A.createUserWithEmailAndPassword(n,r);case 4:if(a=e.sent,a){e.next=7;break}throw new Error("Could not complete signup");case 7:return e.next=9,a.user.updateProfile({displayName:t,photoURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Placeholder_no_text.svg/150px-Placeholder_no_text.svg.png"});case 9:return E.value=null,e.abrupt("return",a);case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0.message),E.value=e.t0.message;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(n,r,t){return e.apply(this,arguments)}}(),O=function(){return{error:E,signup:I}};const q=O,j={setup:function(e,n){var r=(0,H.iH)(""),t=(0,H.iH)(""),a=(0,H.iH)(""),o=(0,H.iH)(null),u=q(),i=u.error,l=u.signup,s=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(t.value,a.value,r.value);case 2:i.value||n.emit("signup");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{displayName:r,email:t,password:a,handleSubmit:s,error:i,photoURL:o}}},F=(0,u.Z)(j,[["render",C]]),W=F;var B={class:"error"},K=(0,a._)("button",null,"Log in",-1);function V(e,n,r,o,u,i){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[2]||(n[2]=(0,t.iM)((function(){return o.handleSubmit&&o.handleSubmit.apply(o,arguments)}),["prevent"]))},[(0,a.wy)((0,a._)("input",{type:"email",required:"",placeholder:"email","onUpdate:modelValue":n[0]||(n[0]=function(e){return o.email=e})},null,512),[[t.nr,o.email]]),(0,a.wy)((0,a._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":n[1]||(n[1]=function(e){return o.password=e})},null,512),[[t.nr,o.password]]),(0,a._)("div",B,(0,_.zw)(o.error),1),K],32)}var R=(0,H.iH)(null),T=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(n,r){var t;return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return R.value=null,e.prev=1,e.next=4,A.signInWithEmailAndPassword(n,r);case 4:return t=e.sent,R.value=null,console.log(t),e.abrupt("return",t);case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0.message),R.value="Incorrect login data";case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n,r){return e.apply(this,arguments)}}(),M=function(){return{error:R,login:T}};const Y=M,G={setup:function(e,n){var r=(0,H.iH)(""),t=(0,H.iH)(""),a=Y(),o=a.error,u=a.login,i=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(r.value,t.value);case 2:o.value||n.emit("login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{email:r,password:t,handleSubmit:i,error:o}}},Q=(0,u.Z)(G,[["render",V]]),J=Q,X={components:{SignupForm:W,LoginForm:J},setup:function(){var e=(0,H.iH)(!0),n=(0,c.tv)(),r=function(){n.push({name:"chatroom"})},t=function(){var e=new U.Z.auth.GoogleAuthProvider;U.Z.auth().signInWithPopup(e).then((function(){n.push({name:"chatroom"})}))["catch"]((function(e){console.log(e)}))};return{showLogin:e,enterChat:r,googleSignIn:t}}},$=(0,u.Z)(X,[["render",b]]),ee=$;var ne={key:0,class:"container"};function re(e,n,r,t,o,u){var i=(0,a.up)("Navbar"),l=(0,a.up)("ChatWindow"),s=(0,a.up)("NewChatForm");return t.user?((0,a.wg)(),(0,a.iD)("div",ne,[(0,a.Wm)(i),(0,a.Wm)(l),(0,a.Wm)(s)])):(0,a.kq)("",!0)}var te={key:0},ae={class:"email"},oe={class:"profile"},ue=(0,a._)("hr",null,null,-1);function ie(e,n,r,t,o,u){return t.user?((0,a.wg)(),(0,a.iD)("nav",te,[(0,a._)("div",null,[(0,a._)("p",null,"Hey there "+(0,_.zw)(t.user.displayName),1),(0,a._)("p",ae,"Currently logged in as "+(0,_.zw)(t.user.email),1)]),(0,a._)("div",oe,[(0,a._)("button",{onClick:n[0]||(n[0]=function(){return t.handleProfile&&t.handleProfile.apply(t,arguments)})},"Profile"),ue,(0,a._)("button",{onClick:n[1]||(n[1]=function(){return t.handleClick&&t.handleClick.apply(t,arguments)})},"Logout")])])):(0,a.kq)("",!0)}var le=(0,H.iH)(null),se=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return le.value=null,e.prev=1,e.next=4,A.signOut();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](1),console.log(e.t0.message),le.value=e.t0.message;case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){return{logout:se,error:le}};const pe=ce;var de=(0,H.iH)(A.currentUser);A.onAuthStateChanged((function(e){console.log("User state change. Current user is:",e),de.value=e}));var ve=function(){return{user:de}};const fe=ve,me={setup:function(){var e=pe(),n=e.logout,r=e.error,t=fe(),a=t.user,o=(0,c.tv)(),u=function(){o.push({name:"profile"})},i=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:r.value||console.log("user logged out");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleProfile:u,handleClick:i,user:a}}},ge=(0,u.Z)(me,[["render",ie]]),he=ge;var we=function(e){return(0,a.dD)("data-v-60188958"),e=e(),(0,a.Cn)(),e},ye={class:"sendText"},ke=we((function(){return(0,a._)("label",null,"Upload image",-1)})),be={class:"error"},_e={class:"error"};function Ze(e,n,r,o,u,i){return(0,a.wg)(),(0,a.iD)("form",null,[(0,a._)("div",ye,[(0,a.wy)((0,a._)("textarea",{placeholder:"Type a message and click enter to send...","onUpdate:modelValue":n[0]||(n[0]=function(e){return o.message=e}),onKeypress:n[1]||(n[1]=(0,t.D2)((0,t.iM)((function(){return o.handleSubmit&&o.handleSubmit.apply(o,arguments)}),["prevent"]),["enter"]))},"\n        ",544),[[t.nr,o.message]]),ke,(0,a._)("input",{type:"file",onChange:n[2]||(n[2]=function(){return o.handleChange&&o.handleChange.apply(o,arguments)})},null,32)]),(0,a._)("div",be,(0,_.zw)(o.fileError),1),(0,a._)("div",_e,(0,_.zw)(o.error),1)])}r(6699);var xe=function(e){var n=(0,H.iH)(null),r=function(){var r=(0,D.Z)((0,S.Z)().mark((function r(t){return(0,S.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.value=null,r.prev=1,r.next=4,N.collection(e).add(t);case 4:r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](1),console.log(r.t0.message),n.value="could not send the message";case 10:case"end":return r.stop()}}),r,null,[[1,6]])})));return function(e){return r.apply(this,arguments)}}();return{error:n,addDoc:r}};const Ce=xe;r(2222),r(8309);var Se=fe(),De=Se.user,He=function(){var e=(0,H.iH)(null),n=(0,H.iH)(null),r=(0,H.iH)(null),t=function(){var t=(0,D.Z)((0,S.Z)().mark((function t(a){var o,u;return(0,S.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.value="profile-pic/".concat(De.value.uid,"/").concat(a.name),o=z.ref(r.value),t.prev=2,t.next=5,o.put(a);case 5:return u=t.sent,t.next=8,u.ref.getDownloadURL();case 8:n.value=t.sent,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0.message),e.value=t.t0.message;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}();return{error:e,url:n,filePath:r,uploadImage:t}};const Ue=He,Pe={setup:function(){var e=fe(),n=e.user,r=Ce("messages"),t=r.addDoc,a=r.error,o=Ue(),u=o.url,i=o.filePath,l=o.uploadImage,s=(0,H.iH)(null),c=(0,H.iH)(null),p=(0,H.iH)(""),d=["image/png","image/jpeg"],v=function(){var e=(0,D.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s.value){e.next=7;break}return e.next=3,l(s.value);case 3:return e.next=5,t({name:n.value.displayName,message:p.value,createdAt:L(),imageUrl:u.value,filePath:i.value});case 5:e.next=9;break;case 7:return e.next=9,t({name:n.value.displayName,message:p.value,createdAt:L()});case 9:a.value||(p.value="");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e){var n=e.target.files[0];console.log(n),n&&d.includes(n.type)?(s.value=n,c.value=null):(s.value=null,c.value="Please select an image file (png or jpg)")};return{message:p,handleSubmit:v,error:a,handleChange:f,fileError:c}}},Ae=(0,u.Z)(Pe,[["render",Ze],["__scopeId","data-v-60188958"]]),Ne=Ae;var Le={class:"chat-window"},ze={key:0},Ee={key:1,class:"messages",ref:"messages"},Ie={class:"created-at"},Oe={class:"name"},qe={class:"message"},je={key:0,class:"image"},Fe=["src"];function We(e,n,r,t,o,u){return(0,a.wg)(),(0,a.iD)("div",Le,[t.error?((0,a.wg)(),(0,a.iD)("div",ze,(0,_.zw)(t.error),1)):(0,a.kq)("",!0),t.documents?((0,a.wg)(),(0,a.iD)("div",Ee,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.formattedDocuments,(function(e){return(0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"single"},[(0,a._)("span",Ie,(0,_.zw)(e.createdAt),1),(0,a._)("span",Oe,(0,_.zw)(e.name),1),(0,a._)("span",qe,(0,_.zw)(e.message),1),e.imageUrl?((0,a.wg)(),(0,a.iD)("span",je,[(0,a._)("img",{src:e.imageUrl},null,8,Fe)])):(0,a.kq)("",!0)])})),128))],512)):(0,a.kq)("",!0)])}var Be=r(5082),Ke=(r(1249),r(9554),r(1539),r(4747),function(e){var n=(0,H.iH)(null),r=(0,H.iH)(null),t=N.collection(e).orderBy("createdAt"),o=t.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){e.data().createdAt&&t.push((0,Be.Z)((0,Be.Z)({},e.data()),{},{id:e.id}))})),n.value=t,r.value=null}),(function(e){console.log(e.message),n.value=null,r.value="Could not fetch data"}));return(0,a.m0)((function(e){e((function(){return o()}))})),{documents:n,error:r}});const Ve=Ke;var Re=r(3621);const Te={setup:function(){var e=Ve("messages"),n=e.error,r=e.documents,t=(0,a.Fl)((function(){if(r.value)return r.value.map((function(e){var n=(0,Re.Z)(e.createdAt.toDate());return(0,Be.Z)((0,Be.Z)({},e),{},{createdAt:n})}))})),o=(0,H.iH)(null);return(0,a.ic)((function(){o.value.scrollTop=o.value.scrollHeight})),{error:n,documents:r,formattedDocuments:t,messages:o}}},Me=(0,u.Z)(Te,[["render",We]]),Ye=Me,Ge={components:{Navbar:he,NewChatForm:Ne,ChatWindow:Ye},setup:function(){var e=fe(),n=e.user,r=(0,c.tv)(),t=Ve("messages"),o=t.error,u=t.documents;return(0,a.YP)(n,(function(){n.value||r.push({name:"welcome"})})),{user:n,error:o,documents:u}}},Qe=(0,u.Z)(Ge,[["render",re]]),Je=Qe;var Xe={class:"container"},$e={class:"card"},en={class:"card-img"},nn=["src"],rn={class:"user-data"};function tn(e,n,r,t,o,u){return(0,a.wg)(),(0,a.iD)("div",Xe,[(0,a._)("div",$e,[(0,a._)("div",en,[(0,a._)("img",{src:"".concat(t.user.photoURL)},null,8,nn)]),(0,a._)("div",rn,[(0,a._)("h2",null,(0,_.zw)(t.user.displayName),1),(0,a._)("span",null,(0,_.zw)(t.user.email),1)]),(0,a._)("button",{onClick:n[0]||(n[0]=function(){return t.handleBack&&t.handleBack.apply(t,arguments)}),class:"back"},"Back")])])}const an={setup:function(){var e=fe(),n=e.user,r=(0,c.tv)(),t=function(){r.push({name:"chatroom"})};return(0,a.YP)(n,(function(){n.value||r.push({name:"welcome"})})),{user:n,handleBack:t}}},on=(0,u.Z)(an,[["render",tn]]),un=on;var ln=function(e,n,r){var t=A.currentUser;t||r({name:"welcome"}),r()},sn=function(e,n,r){var t=A.currentUser;t?r({name:"chatroom"}):r()},cn=[{path:"/",name:"welcome",component:ee,beforeEnter:sn},{path:"/chatroom",name:"chatroom",component:Je,beforeEnter:ln},{path:"/profile",name:"profile",component:un,beforeEnter:ln}],pn=(0,c.p7)({history:(0,c.PO)("/"),routes:cn});const dn=pn;var vn,fn=r(5431);(0,fn.z)("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),A.onAuthStateChanged((function(){vn||(vn=(0,t.ri)(s).use(dn).mount("#app"))}))}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(n,t,a,o)=>{if(!t){var u=1/0;for(c=0;c<e.length;c++){for(var[t,a,o]=e[c],i=!0,l=0;l<t.length;l++)(!1&o||u>=o)&&Object.keys(r.O).every((e=>r.O[e](t[l])))?t.splice(l--,1):(i=!1,o<u&&(u=o));if(i){e.splice(c--,1);var s=a();void 0!==s&&(n=s)}}return n}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[t,a,o]}})(),(()=>{r.n=e=>{var n=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(n,{a:n}),n}})(),(()=>{r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{var e={143:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var a,o,[u,i,l]=t,s=0;if(u.some((n=>0!==e[n]))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var c=l(r)}for(n&&n(t);s<u.length;s++)o=u[s],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},t=self["webpackChunklive_chat"]=self["webpackChunklive_chat"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var t=r.O(void 0,[998],(()=>r(3266)));t=r.O(t)})();
//# sourceMappingURL=app.9c974628.js.map
{"ast":null,"code":"import { ref } from '@vue/reactivity';\nimport getUser from '@/composables/getUser';\nimport useCollection from '@/composables/useCollection';\nimport { timestamp } from '@/firebase/config';\nexport default {\n  setup() {\n    const {\n      user\n    } = getUser();\n    const {\n      addDoc,\n      error\n    } = useCollection('messages');\n    const message = ref('');\n\n    const handleSubmit = async () => {\n      const chat = {\n        name: user.value.displayName,\n        message: message.value,\n        createdAt: timestamp()\n      };\n      await addDoc();\n      message.value = '';\n    };\n\n    return {\n      message,\n      handleSubmit,\n      error\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAYA,SAASA,GAAT,QAAoB,iBAApB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,SAASC,SAAT,QAA0B,mBAA1B;AAEA,eAAe;EACXC,KAAK,GAAG;IACJ,MAAM;MAAEC;IAAF,IAAWJ,OAAO,EAAxB;IACA,MAAM;MAAEK,MAAF;MAAUC;IAAV,IAAoBL,aAAa,CAAC,UAAD,CAAvC;IAEA,MAAMM,OAAM,GAAIR,GAAG,CAAC,EAAD,CAAnB;;IAEA,MAAMS,YAAW,GAAI,YAAY;MAC7B,MAAMC,IAAG,GAAI;QACTC,IAAI,EAAEN,IAAI,CAACO,KAAL,CAAWC,WADR;QAETL,OAAO,EAAEA,OAAO,CAACI,KAFR;QAGTE,SAAS,EAAEX,SAAS;MAHX,CAAb;MAKA,MAAMG,MAAM,EAAZ;MACAE,OAAO,CAACI,KAAR,GAAgB,EAAhB;IACJ,CARA;;IAUA,OAAO;MAAEJ,OAAF;MAAWC,YAAX;MAAyBF;IAAzB,CAAP;EACJ;;AAlBW,CAAf","names":["ref","getUser","useCollection","timestamp","setup","user","addDoc","error","message","handleSubmit","chat","name","value","displayName","createdAt"],"sourceRoot":"","sources":["/Users/kamil/Desktop/Programowanie/JavaScript/Vue/live-chat/src/components/NewChatForm.vue"],"sourcesContent":["<template>\n  <form>\n    <textarea\n        placeholder=\"Type a message and hit enter to send...\"\n        v-model=\"message\"\n        @keypress.enter.prevent=\"handleSubmit\"\n    ></textarea>\n    <div class=\"error\" >{{ error }}</div>\n  </form>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity'\nimport getUser from '@/composables/getUser'\nimport useCollection from '@/composables/useCollection'\nimport { timestamp } from '@/firebase/config'\n\nexport default {\n    setup() {\n        const { user } = getUser()\n        const { addDoc, error } = useCollection('messages')\n\n        const message = ref('')\n\n        const handleSubmit = async () => {\n            const chat = {\n                name: user.value.displayName,\n                message: message.value,\n                createdAt: timestamp()\n            }\n            await addDoc()\n            message.value = ''\n        }\n\n        return { message, handleSubmit, error }\n    }\n}\n</script>\n\n<style scoped>\n    form {\n        margin: 10px;\n    }\n    textarea {\n        width: 100%;\n        max-width: 100%;\n        margin-bottom: 6px;\n        padding: 10px;\n        box-sizing: border-box;\n        border: 0;\n        border-radius: 20px;\n        font-family: inherit;\n        outline: none;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}
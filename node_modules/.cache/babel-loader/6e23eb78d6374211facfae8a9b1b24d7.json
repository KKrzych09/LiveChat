{"ast":null,"code":"import { ref } from '@vue/reactivity';\nimport useLogin from '../composables/useLogin';\nexport default {\n  setup(props, context) {\n    // refs\n    const email = ref('');\n    const password = ref('');\n    const {\n      error,\n      login\n    } = useLogin();\n\n    const handleSubmit = async () => {\n      await login(email.value, password.value);\n\n      if (!error.value) {\n        // After the user has logged in and there's no errors, I want to emit a custom event\n        //that will redirect from login form to the chatroom.\n        // Emitting a custom event is different in composition api though. It's done by context\n        //the second prop setup() function uses and it works the same way that in options api.\n        context.emit('login');\n      }\n    };\n\n    return {\n      email,\n      password,\n      handleSubmit,\n      error\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAUA,SAASA,GAAT,QAAoB,iBAApB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AAEA,eAAe;EACXC,KAAK,CAACC,KAAD,EAAQC,OAAR,EAAiB;IAClB;IACA,MAAMC,KAAI,GAAIL,GAAG,CAAC,EAAD,CAAjB;IACA,MAAMM,QAAO,GAAIN,GAAG,CAAC,EAAD,CAApB;IAEA,MAAM;MAAEO,KAAF;MAASC;IAAT,IAAmBP,QAAQ,EAAjC;;IAEA,MAAMQ,YAAW,GAAI,YAAY;MAC7B,MAAMD,KAAK,CAACH,KAAK,CAACK,KAAP,EAAcJ,QAAQ,CAACI,KAAvB,CAAX;;MACA,IAAI,CAACH,KAAK,CAACG,KAAX,EAAkB;QACd;QACA;QACA;QACA;QACAN,OAAO,CAACO,IAAR,CAAa,OAAb;MACJ;IACJ,CATA;;IAWA,OAAO;MAAEN,KAAF;MAASC,QAAT;MAAmBG,YAAnB;MAAiCF;IAAjC,CAAP;EACJ;;AApBW,CAAf","names":["ref","useLogin","setup","props","context","email","password","error","login","handleSubmit","value","emit"],"sourceRoot":"","sources":["/Users/kamil/Desktop/Programowanie/JavaScript/Vue/live-chat/src/components/LoginForm.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <input type=\"email\" required placeholder=\"email\" v-model=\"email\">\n    <input type=\"password\" required placeholder=\"password\" v-model=\"password\">\n    <div class=\"error\">{{ error }}</div>\n    <button>Log in</button>\n  </form>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity'\nimport useLogin from '../composables/useLogin'\n\nexport default {\n    setup(props, context) {\n        // refs\n        const email = ref('')\n        const password = ref('')\n\n        const { error, login } = useLogin()\n\n        const handleSubmit = async () => {\n            await login(email.value, password.value)\n            if (!error.value) {\n                // After the user has logged in and there's no errors, I want to emit a custom event\n                //that will redirect from login form to the chatroom.\n                // Emitting a custom event is different in composition api though. It's done by context\n                //the second prop setup() function uses and it works the same way that in options api.\n                context.emit('login')\n            }\n        }\n\n        return { email, password, handleSubmit, error }\n    }\n}\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module"}
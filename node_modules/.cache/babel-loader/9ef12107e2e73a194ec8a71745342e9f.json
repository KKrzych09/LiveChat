{"ast":null,"code":"import { projectFirestore } from \"@/firebase/config\";\nimport { ref, watchEffect } from \"vue\";\n\nconst getCollection = collection => {\n  const documents = ref(null);\n  const error = ref(null);\n  let collectionRef = projectFirestore.collection(collection).orderBy('createdAt');\n  collectionRef.onSnapshot(snap => {\n    let results = [];\n    snap.docs.forEach(doc => {\n      doc.data().createdAt && results.push({ ...doc.data(),\n        id: doc.id\n      });\n    });\n    documents.value = results;\n    error.value = null;\n  }, err => {\n    console.log(err.message);\n    documents.value = null;\n    error.value = 'Could not fetch data';\n  });\n  watchEffect(onInvalidate => {// unsub \n  });\n  return {\n    documents,\n    error\n  };\n};\n\nexport default getCollection;","map":{"version":3,"names":["projectFirestore","ref","watchEffect","getCollection","collection","documents","error","collectionRef","orderBy","onSnapshot","snap","results","docs","forEach","doc","data","createdAt","push","id","value","err","console","log","message","onInvalidate"],"sources":["/Users/kamil/Desktop/Programowanie/JavaScript/Vue/live-chat/src/composables/getCollection.js"],"sourcesContent":["import { projectFirestore } from \"@/firebase/config\";\nimport { ref, watchEffect } from \"vue\";\n\nconst getCollection = (collection) => {\n    const documents = ref(null)\n    const error = ref(null)\n\n    let collectionRef = projectFirestore.collection(collection)\n        .orderBy('createdAt')\n        \n    collectionRef.onSnapshot((snap) => {\n        let results = []\n        snap.docs.forEach(doc => {\n            doc.data().createdAt && results.push({ ...doc.data(), id: doc.id })\n        })\n        documents.value = results\n        error.value = null\n    }, (err) => {\n        console.log(err.message)\n        documents.value = null\n        error.value = 'Could not fetch data'\n    })\n\n    watchEffect((onInvalidate) => {\n        // unsub \n    })\n\n    return { documents, error }\n\n}\n\nexport default getCollection"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,mBAAjC;AACA,SAASC,GAAT,EAAcC,WAAd,QAAiC,KAAjC;;AAEA,MAAMC,aAAa,GAAIC,UAAD,IAAgB;EAClC,MAAMC,SAAS,GAAGJ,GAAG,CAAC,IAAD,CAArB;EACA,MAAMK,KAAK,GAAGL,GAAG,CAAC,IAAD,CAAjB;EAEA,IAAIM,aAAa,GAAGP,gBAAgB,CAACI,UAAjB,CAA4BA,UAA5B,EACfI,OADe,CACP,WADO,CAApB;EAGAD,aAAa,CAACE,UAAd,CAA0BC,IAAD,IAAU;IAC/B,IAAIC,OAAO,GAAG,EAAd;IACAD,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkBC,GAAG,IAAI;MACrBA,GAAG,CAACC,IAAJ,GAAWC,SAAX,IAAwBL,OAAO,CAACM,IAAR,CAAa,EAAE,GAAGH,GAAG,CAACC,IAAJ,EAAL;QAAiBG,EAAE,EAAEJ,GAAG,CAACI;MAAzB,CAAb,CAAxB;IACH,CAFD;IAGAb,SAAS,CAACc,KAAV,GAAkBR,OAAlB;IACAL,KAAK,CAACa,KAAN,GAAc,IAAd;EACH,CAPD,EAOIC,GAAD,IAAS;IACRC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;IACAlB,SAAS,CAACc,KAAV,GAAkB,IAAlB;IACAb,KAAK,CAACa,KAAN,GAAc,sBAAd;EACH,CAXD;EAaAjB,WAAW,CAAEsB,YAAD,IAAkB,CAC1B;EACH,CAFU,CAAX;EAIA,OAAO;IAAEnB,SAAF;IAAaC;EAAb,CAAP;AAEH,CA1BD;;AA4BA,eAAeH,aAAf"},"metadata":{},"sourceType":"module"}
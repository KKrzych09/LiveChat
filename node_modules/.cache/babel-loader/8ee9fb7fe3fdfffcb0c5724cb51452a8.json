{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chat-window\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"messages\",\n  ref: \"messages\"\n};\nconst _hoisted_4 = {\n  class: \"created-at\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"profilePic\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"https://wallpaperspeed.id/gallery/wallpaper/20220428/profile-picture-anime-1-forum-avatar-profile-photo-id-161887-avatar-abyss,best-caption-for-anime-profile-picture-preview.webp\",\n  alt: \"#\"\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = {\n  class: \"name\"\n};\nconst _hoisted_7 = {\n  class: \"message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($setup.error), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), $setup.documents ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.formattedDocuments, doc => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: doc.id,\n      class: \"single\"\n    }, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString(doc.createdAt), 1\n    /* TEXT */\n    ), _hoisted_5, _createElementVNode(\"span\", _hoisted_6, _toDisplayString(doc.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(doc.message), 1\n    /* TEXT */\n    )]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))], 512\n  /* NEED_PATCH */\n  )) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;;;;;EAEaA,KAAK,EAAC;EAAWC,GAAG,EAAC;;;EAE7BD,KAAK,EAAC;;;gCACZE,oBAEO,MAFP,EAEO;EAFDF,KAAK,EAAC;AAEL,CAFP,EAAwB,cACpBE,oBAAsM,KAAtM,EAAsM;EAAjMC,GAAG,EAAC,oLAA6L;EAARC,GAAG,EAAC;AAAI,CAAtM,CADoB,CAAxB;;AAAA;;;EAGMJ,KAAK,EAAC;;;EACNA,KAAK,EAAC;;;uBATtBK,oBAYM,KAZN,cAYM,CAXOC,8BAAXD,oBAAmC,KAAnC,EAAmCE,UAAnC,EAAmCC,iBAAdF,YAAc,CAAnC,EAA0B;EAAA;EAA1B,sCAWI,EAVOA,kCAAXD,oBASM,KATN,cASM,oBARFA,oBAOMI,SAPN,EAOM,IAPN,EAOMC,YAPaJ,yBAOb,EAPMK,GAAyB,IAAtB;yBAAfN,oBAOM,KAPN,EAOM;MAPkCO,GAAG,EAAED,GAAG,CAACE,EAO3C;MAP+Cb,KAAK,EAAC;IAOrD,CAPN,GACIE,oBAAmD,MAAnD,cAAmDM,iBAAvBG,GAAG,CAACG,SAAmB,CAAnD,EAAyC;IAAA;IAAzC,GACAC,YAGAb,oBAAwC,MAAxC,cAAwCM,iBAAlBG,GAAG,CAACK,IAAc,CAAxC,EAA8B;IAAA;IAA9B,GACAd,oBAA8C,MAA9C,cAA8CM,iBAArBG,GAAG,CAACM,OAAiB,CAA9C,EAAoC;IAAA;IAApC,EANJ;GAOM,CAPN;;EAAA,CAQE,EATN;;EAAA,sCAUI,CAZN","names":["class","ref","_createElementVNode","src","alt","_createElementBlock","$setup","_hoisted_2","_toDisplayString","_Fragment","_renderList","doc","key","id","createdAt","_hoisted_5","name","message"],"sourceRoot":"","sources":["/Users/kamil/Desktop/Programowanie/JavaScript/Vue/live-chat/src/components/ChatWindow.vue"],"sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div v-if=\"error\">{{ error }}</div>\n    <div v-if=\"documents\" class=\"messages\" ref=\"messages\">\n        <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\n            <span class=\"created-at\">{{ doc.createdAt }}</span>\n            <span class=\"profilePic\">\n                <img src=\"https://wallpaperspeed.id/gallery/wallpaper/20220428/profile-picture-anime-1-forum-avatar-profile-photo-id-161887-avatar-abyss,best-caption-for-anime-profile-picture-preview.webp\" alt=\"#\">\n            </span>\n            <span class=\"name\">{{ doc.name }}</span>\n            <span class=\"message\">{{ doc.message }}</span>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getCollection from '../composables/getCollection'\nimport { formatDistanceToNow } from 'date-fns'\nimport { computed, onUpdated, ref } from '@vue/runtime-core'\n\nexport default {\n    setup() {\n        const { error, documents } = getCollection('messages')\n\n        const formattedDocuments = computed(() => {\n            if (documents.value) {\n                return documents.value.map(doc => {\n                    let time = formatDistanceToNow(doc.createdAt.toDate())\n                    return { ...doc, createdAt: time }\n                })\n            }\n        })\n\n        // auto scroll to bottom of messages\n        const messages = ref(null)\n\n        onUpdated(() => {\n            messages.value.scrollTop = messages.value.scrollHeight\n        })\n\n        return { error, documents, formattedDocuments, messages }\n    }\n}\n</script>\n\n<style>\n    .chat-window {\n        background: #fafafa;\n        padding: 30px 20px;\n    }\n    .single {\n        margin: 18px 0;\n    }\n    .created-at {\n        display: block;\n        color: #999;\n        font-size: 12px;\n        margin-bottom: 4px;\n    }\n    .profilePic img {\n        height: 40px;\n        width: 40px;\n        margin-right: 12px;\n        border-radius: 50%;\n        /* display: inline-block; */\n        box-shadow: 2px 4px 6px rgba(28, 6, 49, 0.1);\n        background: white;\n    }\n    .name {\n        font-weight: bold;\n        margin-right: 6px;\n    }\n    .messages {\n        max-height: 400px;\n        overflow: auto;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import getCollection from '../composables/getCollection';\nimport { formatDistanceToNow } from 'date-fns';\nimport { computed, onUpdated, ref } from '@vue/runtime-core';\nexport default {\n  setup() {\n    const {\n      error,\n      documents\n    } = getCollection('messages');\n    const formattedDocuments = computed(() => {\n      if (documents.value) {\n        return documents.value.map(doc => {\n          let time = formatDistanceToNow(doc.createdAt.toDate());\n          return { ...doc,\n            createdAt: time\n          };\n        });\n      }\n    }); // auto scroll to bottom of messages\n\n    const messages = ref(null);\n    onUpdated(() => {\n      messages.value.scrollTop = messages.value.scrollHeight;\n    });\n    return {\n      error,\n      documents,\n      formattedDocuments,\n      messages\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAgBA,OAAOA,aAAP,MAA0B,8BAA1B;AACA,SAASC,mBAAT,QAAoC,UAApC;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,GAA9B,QAAyC,mBAAzC;AAEA,eAAe;EACXC,KAAK,GAAG;IACJ,MAAM;MAAEC,KAAF;MAASC;IAAT,IAAuBP,aAAa,CAAC,UAAD,CAA1C;IAEA,MAAMQ,kBAAiB,GAAIN,QAAQ,CAAC,MAAM;MACtC,IAAIK,SAAS,CAACE,KAAd,EAAqB;QACjB,OAAOF,SAAS,CAACE,KAAV,CAAgBC,GAAhB,CAAoBC,GAAE,IAAK;UAC9B,IAAIC,IAAG,GAAIX,mBAAmB,CAACU,GAAG,CAACE,SAAJ,CAAcC,MAAd,EAAD,CAA9B;UACA,OAAO,EAAE,GAAGH,GAAL;YAAUE,SAAS,EAAED;UAArB,CAAP;QACH,CAHM,CAAP;MAIJ;IACH,CAPkC,CAAnC,CAHI,CAYJ;;IACA,MAAMG,QAAO,GAAIX,GAAG,CAAC,IAAD,CAApB;IAEAD,SAAS,CAAC,MAAM;MACZY,QAAQ,CAACN,KAAT,CAAeO,SAAf,GAA2BD,QAAQ,CAACN,KAAT,CAAeQ,YAA1C;IACH,CAFQ,CAAT;IAIA,OAAO;MAAEX,KAAF;MAASC,SAAT;MAAoBC,kBAApB;MAAwCO;IAAxC,CAAP;EACJ;;AArBW,CAAf","names":["getCollection","formatDistanceToNow","computed","onUpdated","ref","setup","error","documents","formattedDocuments","value","map","doc","time","createdAt","toDate","messages","scrollTop","scrollHeight"],"sourceRoot":"","sources":["/Users/kamil/Desktop/Programowanie/JavaScript/Vue/live-chat/src/components/ChatWindow.vue"],"sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div v-if=\"error\">{{ error }}</div>\n    <div v-if=\"documents\" class=\"messages\" ref=\"messages\">\n        <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\n            <span class=\"created-at\">{{ doc.createdAt }}</span>\n            <span class=\"profilePic\">\n                <img src=\"#\" alt=\"#\"></span>\n            <span class=\"name\">{{ doc.name }}</span>\n            <span class=\"message\">{{ doc.message }}</span>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getCollection from '../composables/getCollection'\nimport { formatDistanceToNow } from 'date-fns'\nimport { computed, onUpdated, ref } from '@vue/runtime-core'\n\nexport default {\n    setup() {\n        const { error, documents } = getCollection('messages')\n\n        const formattedDocuments = computed(() => {\n            if (documents.value) {\n                return documents.value.map(doc => {\n                    let time = formatDistanceToNow(doc.createdAt.toDate())\n                    return { ...doc, createdAt: time }\n                })\n            }\n        })\n\n        // auto scroll to bottom of messages\n        const messages = ref(null)\n\n        onUpdated(() => {\n            messages.value.scrollTop = messages.value.scrollHeight\n        })\n\n        return { error, documents, formattedDocuments, messages }\n    }\n}\n</script>\n\n<style>\n    .chat-window {\n        background: #fafafa;\n        padding: 30px 20px;\n    }\n    .single {\n        margin: 18px 0;\n    }\n    .created-at {\n        display: block;\n        color: #999;\n        font-size: 12px;\n        margin-bottom: 4px;\n    }\n    .profilePic {\n        margin-right: 12px;\n        padding: 10px 15px;\n        border-radius: 50%;\n        display: inline-block;\n        box-shadow: 2px 4px 6px rgba(28, 6, 49, 0.1);\n        background: white;\n    }\n    .name {\n        font-weight: bold;\n        margin-right: 6px;\n    }\n    .messages {\n        max-height: 400px;\n        overflow: auto;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}
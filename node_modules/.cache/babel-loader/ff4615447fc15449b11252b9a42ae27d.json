{"ast":null,"code":"import useCollection from '../composables/useCollection';\nimport getUser from '../composables/getUser';\nimport { timestamp } from '../firebase/config';\nimport { ref } from 'vue';\nexport default {\n  setup() {\n    const {\n      user\n    } = getUser();\n    const {\n      addDoc,\n      error\n    } = useCollection('messages'); // refs\n\n    const message = ref('');\n\n    const handleSubmit = async () => {\n      const chat = {\n        name: user.value.displayName,\n        message: message.value,\n        createdAt: timestamp()\n      };\n      await addDoc(chat);\n\n      if (!error.value) {\n        message.value = '';\n      }\n    };\n\n    return {\n      message,\n      handleSubmit,\n      error\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAYA,OAAOA,aAAP,MAA0B,8BAA1B;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,eAAe;EACbC,KAAK,GAAG;IACN,MAAM;MAAEC;IAAF,IAAWJ,OAAO,EAAxB;IACA,MAAM;MAAEK,MAAF;MAAUC;IAAV,IAAoBP,aAAa,CAAC,UAAD,CAAvC,CAFM,CAGN;;IACA,MAAMQ,OAAM,GAAIL,GAAG,CAAC,EAAD,CAAnB;;IACA,MAAMM,YAAW,GAAI,YAAY;MAC/B,MAAMC,IAAG,GAAI;QACXC,IAAI,EAAEN,IAAI,CAACO,KAAL,CAAWC,WADN;QAEXL,OAAO,EAAEA,OAAO,CAACI,KAFN;QAGXE,SAAS,EAAEZ,SAAS;MAHT,CAAb;MAKA,MAAMI,MAAM,CAACI,IAAD,CAAZ;;MACA,IAAI,CAACH,KAAK,CAACK,KAAX,EAAkB;QAChBJ,OAAO,CAACI,KAAR,GAAgB,EAAhB;MACF;IACF,CAVA;;IAWA,OAAO;MAAEJ,OAAF;MAAWC,YAAX;MAAyBF;IAAzB,CAAP;EACF;;AAlBa,CAAf","names":["useCollection","getUser","timestamp","ref","setup","user","addDoc","error","message","handleSubmit","chat","name","value","displayName","createdAt"],"sourceRoot":"","sources":["/Users/kamil/Desktop/Programowanie/JavaScript/Vue/live-chat/src/components/NewChatForm.vue"],"sourcesContent":["<template>\n  <form>\n    <textarea\n        placeholder=\"Type a message and hit enter to send...\"\n        v-model=\"message\"\n        @keypress.enter.prevent=\"handleSubmit\"\n    ></textarea>\n    <div class=\"error\" >{{ error }}</div>\n  </form>\n</template>\n\n<script>\nimport useCollection from '../composables/useCollection'\nimport getUser from '../composables/getUser'\nimport { timestamp } from '../firebase/config'\nimport { ref } from 'vue'\nexport default {\n  setup() {\n    const { user } = getUser()\n    const { addDoc, error } = useCollection('messages')\n    // refs\n    const message = ref('')\n    const handleSubmit = async () => {\n      const chat = {\n        name: user.value.displayName,\n        message: message.value,\n        createdAt: timestamp()\n      }\n      await addDoc(chat)\n      if (!error.value) {\n        message.value = ''\n      }\n    }\n    return { message, handleSubmit, error }\n  }\n}\n</script>\n\n<style scoped>\n    form {\n        margin: 10px;\n    }\n    textarea {\n        width: 100%;\n        max-width: 100%;\n        margin-bottom: 6px;\n        padding: 10px;\n        box-sizing: border-box;\n        border: 0;\n        border-radius: 20px;\n        font-family: inherit;\n        outline: none;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}